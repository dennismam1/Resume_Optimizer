<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resume Optimizer - Upload</title>
  <link rel="stylesheet" href="/styles.css" />
  <script src="/app.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="card" id="auth-card" style="margin-bottom:16px;">
      <div class="row" style="display:flex; align-items:flex-end; gap:12px; flex-wrap:wrap;">
        <div style="flex:1; min-width:220px;">
          <label for="auth-username">Username</label>
          <input id="auth-username" type="text" placeholder="Enter username" autocomplete="username" />
        </div>
        <div style="flex:1; min-width:220px;">
          <label for="auth-password">Password</label>
          <input id="auth-password" type="password" placeholder="Enter password" autocomplete="current-password" />
        </div>
        <div style="display:flex; gap:8px;">
          <button id="login-btn" type="button">Login</button>
          <button id="register-btn" type="button" class="secondary">Register</button>
          <button id="logout-btn" type="button" style="display:none;">Logout</button>
        </div>
      </div>
      <div class="row" style="display:flex; align-items:center; justify-content:space-between;">
        <div id="auth-status" class="muted"></div>
        <div id="current-user" class="muted"></div>
      </div>
    </div>

    <div id="app-content" style="display:none;">
      <div id="userbar" class="userbar" style="display:none;">
        <button id="user-menu-button" class="user-menu-button">
          <span id="user-menu-username">User</span>
          <span class="chevron">‚ñæ</span>
        </button>
        <div id="user-menu" class="user-menu" style="display:none;">
          <button class="user-menu-item" data-action="account">
            <span class="icon">üë§</span>
            <span>Account</span>
          </button>
          <button class="user-menu-item" data-action="premium">
            <span class="icon">üëë</span>
            <span>Premium</span>
          </button>
          <button class="user-menu-item" data-action="logout">
            <span class="icon">‚Ü™</span>
            <span>Logout</span>
          </button>
          <button class="user-menu-item" data-action="shortcuts">
            <span class="icon">‚å®</span>
            <span>Shortcuts</span>
          </button>
          <button class="user-menu-item danger" data-action="delete-account">
            <span class="icon">üóë</span>
            <span>Delete Account</span>
          </button>
        </div>
      </div>

      <div class="tabs">
        <button id="tab-submit" class="tab active" type="button">Submit</button>
        <button id="tab-history" class="tab" type="button">History</button>
      </div>

      <div id="submit-section">
        <h1>Resume Optimizer - Submit</h1>
        <p class="helper">Upload your resume and job posting files (PDF/Image/Word), and/or type a message. Submit at least one.</p>

        <form id="upload-form" class="card" onsubmit="submitForm(event)" enctype="multipart/form-data">
        <div class="row">
          <label for="file">Resume File *</label>
          <input id="file" name="file" type="file" class="hidden-file-input" accept=".pdf,.doc,.docx,image/*" onchange="fileChanged(this, 'file-btn-label')" />
          <label class="upload-button" for="file">
            <span id="file-btn-label">Drop your resume here</span>
          </label>
        </div>

        <div class="row">
          <label for="jobPost">Job Posting File *</label>
          <input id="jobPost" name="jobPost" type="file" class="hidden-file-input" accept=".pdf,.doc,.docx,.txt,image/*" onchange="fileChanged(this, 'jobpost-btn-label')" />
          <label class="upload-button" for="jobPost">
            <span id="jobpost-btn-label">Upload job description</span>
          </label>
        </div>

        <div class="row">
          <label for="jobPostUrl">Or Job Posting URL</label>
          <input id="jobPostUrl" name="jobPostUrl" type="url" placeholder="https://example.com/job/software-engineer" oninput="toggleJobPostInputs()" />
          <div class="muted">If provided, we will fetch and parse the job description text from this link.</div>
        </div>

        <div class="row">
          <label for="message">Additional Requirements (Optional)</label>
          <textarea id="message" name="message" rows="5" placeholder="Specify any particular skills, experience level, or requirements you‚Äôd like to emphasize in your application..."></textarea>
        </div>

        <div class="row">
          <button id="submit-btn" type="submit">Analyze Resume</button>
          <div id="status" class="muted"></div>
        </div>
        </form>

        <div class="list" id="recent"></div>
      </div>

      <div id="history-section" style="display:none;">
        <h1>Job Application History</h1>
        <p class="helper">Track your job applications, ATS scores, and interview schedules.</p>
        <div class="list" id="history"></div>
      </div>
    </div>

    <!-- Account Page (Design-only) -->
    <div id="account-section" style="display:none;">
      <div class="account-header">
        <div>
          <h1>Welcome back, <span id="account-username">User</span>!</h1>
          <div class="muted">Here's your resume optimization progress and recent activity</div>
        </div>
        <button id="account-back" type="button" class="secondary">‚Üê Back</button>
      </div>

      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-icon">üìÑ</div>
          <div class="kpi-content">
            <div class="kpi-value">24</div>
            <div class="kpi-label">Resumes Analyzed</div>
            <div class="kpi-sub">+2 this week</div>
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon success">‚úÖ</div>
          <div class="kpi-content">
            <div class="kpi-value">87%</div>
            <div class="kpi-label">Average ATS Score</div>
            <div class="kpi-sub">+5% improvement</div>
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon warn">üìå</div>
          <div class="kpi-content">
            <!-- <div class="kpi-value">6</div> -->
            <div class="kpi-label">Job Applications</div>
            <div class="kpi-sub">2 interviews scheduled</div>
          </div>
        </div>
      </div>

      <div class="account-grid">
        <div class="account-main">
          <div class="panel">
            <div class="panel-header has-divider">
              <div class="panel-title">Quick Actions</div>
            </div>
            <div class="qa-actions">
              <button id="qa-btn-analyze" type="button" class="qa-btn qa-btn-primary">
                <span class="qa-icon" aria-hidden="true">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2.5L19.5 10H14V4.5z"/>
                  </svg>
                </span>
                <span>Analyze New Resume</span>
              </button>
              <button id="qa-btn-history" type="button" class="qa-btn qa-btn-secondary">
                <span class="qa-icon" aria-hidden="true">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10zm0-8a3 3 0 1 0 .001 6.001A3 3 0 0 0 12 9z"/>
                  </svg>
                </span>
                <span>View History</span>
              </button>
            </div>
          </div>

          <div class="panel">
            <div class="panel-header compact">
              <div class="panel-title">ATS Score Progress</div>
              <a class="panel-link" href="#">View Details</a>
            </div>
            <div class="chart-box">
              <canvas id="ats-progress-canvas" width="600" height="180" aria-label="ATS score over time"></canvas>
              <div id="ats-progress-empty" class="muted" style="display:none; padding:8px;">No ATS history yet. Calculate an ATS score to see progress.</div>
            </div>
          </div>
        </div>

        <div class="account-side">
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title">Recent Activity</div>
              <a class="panel-link" href="#">View All</a>
            </div>
            <div class="activity-list">
              <div class="activity-item">
                <div class="activity-dot blue"></div>
                <div>
                  <div class="activity-title">Resume Analysis Complete</div>
                  <div class="activity-sub muted">Software Engineer position at TechCorp ¬∑ 2 hours ago</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-dot green"></div>
                <div>
                  <div class="activity-title">Cover Letter Generated</div>
                  <div class="activity-sub muted">Account Manager for Product Manager role ¬∑ 1 day ago</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-dot yellow"></div>
                <div>
                  <div class="activity-title">Draft Saved</div>
                  <div class="activity-sub muted">Marketing Specialist application ¬∑ 3 days ago</div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="panel">
            <div class="panel-header">
              <div class="panel-title">Saved Drafts</div>
              <a class="panel-link" href="#">Manage All</a>
            </div>
            <div class="drafts-list"> -->
              <!-- <div class="draft-card">
                <div class="draft-title">Frontend Developer - ByteBrite</div>
                <div class="draft-meta muted">Created 2 days ago ¬∑ ATS 82%</div>
                <div class="draft-actions">
                  <button type="button" class="ghost">Edit</button>
                  <button type="button">Complete</button>
                </div>
              </div> -->
              <!-- <div class="draft-card">
                <div class="draft-title">Data Analyst - BigTech Corp</div>
                <div class="draft-meta muted">Created last week ¬∑ Needs cover letter</div>
                <div class="draft-actions">
                  <button type="button" class="ghost">Edit</button>
                  <button type="button">Complete</button>
                </div>
              </div>
              <div class="draft-card">
                <div class="draft-title">UX Designer - Creative Agency</div>
                <div class="draft-meta muted">Draft by Suzanne</div>
                <div class="draft-actions">
                  <button type="button" class="ghost">Edit</button>
                  <button type="button" class="success">Submit</button>
                </div>
              </div>
            </div> -->
          <!-- </div>
        </div>
      </div> -->

      <!-- <div class="subscription-panel">
        <div class="panel">
          <div class="subscription-grid">
            <div> -->
              <!-- <div class="panel-title">Your Subscription</div>
              <div class="usage-grid">
                <div class="usage-row">
                  <div class="usage-label">Resume Analyses</div>
                  <div class="usage-bar"><div style="width: 85%"></div></div>
                  <div class="usage-value">850</div>
                </div>
                <div class="usage-row">
                  <div class="usage-label">Cover Letters</div>
                  <div class="usage-bar"><div style="width: 42%"></div></div>
                  <div class="usage-value">426</div>
                </div>
              </div>
            </div> -->
            <!-- <div class="billing">
              <div class="billing-next muted">Next billing</div>
              <div class="billing-date">October 15, 2025 ¬∑ $19.99</div>
              <div class="billing-actions">
                <button type="button" class="ghost">Manage Billing</button>
                <button type="button" class="secondary">Upgrade</button>
              </div>
            </div> -->
          <!-- </div>
        </div> -->
      </div>
    </div>

    <!-- Edit Application Modal -->
    <div id="edit-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Edit Application</h2>
          <button class="modal-close" id="edit-modal-close">&times;</button>
        </div>
        <form id="edit-application-form">
          <div class="form-row">
            <label for="edit-company-name">Company Name *</label>
            <input type="text" id="edit-company-name" name="companyName" required />
          </div>
          
          <div class="form-row">
            <label for="edit-position">Position *</label>
            <input type="text" id="edit-position" name="jobTitle" required />
          </div>
          
          <div class="form-row">
            <label for="edit-status">Status</label>
            <select id="edit-status" name="applicationStatus">
              <option value="Pending">Pending</option>
              <option value="Under Review">Under Review</option>
              <option value="Interview Scheduled">Interview Scheduled</option>
              <option value="Rejected">Rejected</option>
              <option value="Offer Received">Offer Received</option>
            </select>
          </div>
          
          <div class="form-row">
            <label for="edit-interview-date">Interview Date</label>
            <input type="date" id="edit-interview-date" name="interviewDate" />
          </div>
          
          <div class="form-row">
            <label for="edit-notes">Notes</label>
            <textarea id="edit-notes" name="notes" rows="4" placeholder="Phone screening completed, technical interview scheduled"></textarea>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="edit-cancel">Cancel</button>
            <button type="submit" class="btn-primary">Update Application</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>


